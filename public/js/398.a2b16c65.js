"use strict";(self["webpackChunkquasar_app"]=self["webpackChunkquasar_app"]||[]).push([[398],{1327:(e,t,a)=>{a.d(t,{tC:()=>c,xO:()=>u});var s=a(7083),n=a(52),i=a.n(n),l=(a(3459),a(5343)),o=a(8669),r=a(4434);const u={token:"$P$ByJtUe8KliwKh9WNUDkZFpsvJfm5K11"},c=i().create({baseURL:"https://vo.qb2b.ru",withCredentials:!0});c.interceptors.request.use((e=>{let t=localStorage.getItem("token");return t&&(e.headers["Authorization"]=`Bearer ${t}`),e}),(e=>Promise.reject(e))),c.interceptors.response.use((e=>(e.data.message&&r.Z.create({type:"positive",message:e.data.message}),e)),(e=>(401===e.response.status&&(e.response.message&&r.Z.create({type:"negative",message:e.response.message}),l["default"].dispatch("user/clearStorage"),o.Z.go("/login")),e)));(0,s.xr)((({app:e})=>{e.config.globalProperties.$axios=i(),e.config.globalProperties.$api=c}))},4429:(e,t,a)=>{a.d(t,{CU:()=>n,fH:()=>i,Bm:()=>l});var s=a(5474);a(1327);const n=async(e,t=null)=>new Promise(((a,n)=>{s.api.post(e,t).then((e=>{e.status>=200&&e.status<300?a(e):n(e)})).catch((e=>{n(e)}))})),i=async e=>new Promise(((t,a)=>{s.api["delete"](e).then((e=>{e.status>=200&&e.status<300?t(e):a(e)})).catch((e=>{a(e)}))})),l=async(e,t)=>new Promise(((a,n)=>{s.api.put(e,t).then((e=>{e.status>=200&&e.status<300?a(e):n(e)})).catch((e=>{n(e)}))}))},2398:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var s=a(3673),n=a(2323);const i={key:0,class:"title-container"},l={class:"title--style-1"},o={class:"q-mt-xl q-mb-md info-section text-secondary"},r={class:"row info-section__content"},u=(0,s._)("div",{class:"text--style-2"},"Если окно снизу пустое нажмите на кнопку:",-1),c={class:"frame-container shadow-10 q-mt-xl"},d=["src"],g={key:1,class:"q-my-xl"},m=(0,s._)("div",{class:"text-h6"},"Подтвердите действие",-1),p=(0,s.Uk)(" Вы действительно хотите удалить устав? ");function h(e,t,a,h,f,k){const _=(0,s.up)("q-icon"),q=(0,s.up)("q-btn"),v=(0,s.up)("q-card-section"),w=(0,s.up)("q-card-actions"),b=(0,s.up)("q-card"),y=(0,s.up)("q-dialog"),C=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[null!=e.current_regulation?((0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("h6",l,(0,n.zw)(e.current_regulation.name),1)])):(0,s.kq)("",!0),(0,s._)("div",o,[(0,s._)("div",r,[(0,s.Wm)(_,{class:"info-section__icon q-mr-md",name:"info"}),u,(0,s.Wm)(q,{class:"q-ml-md q-mr-md",color:"secondary",label:"Обновить окно",onClick:k.refreshLink},null,8,["onClick"])])]),(0,s._)("div",c,[null!=e.current_regulation?((0,s.wg)(),(0,s.iD)("iframe",{key:0,class:"docx-frame",src:e.current_regulation.full_link,frameborder:"0"},null,8,d)):(0,s.kq)("",!0)]),e.isAdmin?((0,s.wg)(),(0,s.iD)("div",g,[(0,s.Wm)(q,{color:"negative",label:"Удалить устав",onClick:t[0]||(t[0]=e=>this.deleteRegulationDialog=!this.deleteRegulationDialog)}),(0,s.Wm)(y,{modelValue:f.deleteRegulationDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>f.deleteRegulationDialog=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[m])),_:1}),(0,s.Wm)(v,{class:"q-pt-none"},{default:(0,s.w5)((()=>[p])),_:1}),(0,s.Wm)(w,{align:"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(q,{flat:"",label:"Удалить",color:"negative",onClick:this.deleteRegulation},null,8,["onClick"]),(0,s.wy)((0,s.Wm)(q,{flat:"",label:"Отменить",color:"primary"},null,512),[[C]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])):(0,s.kq)("",!0)],64)}var f=a(3617),k=a(4429);const _={data(){return{deleteRegulationDialog:!1}},methods:{...(0,f.nv)("regulations",["regulationInit","regulationUnset","regulationsList","regulationSetLink"]),refreshLink(e){let t=e.target;t.setAttribute("disabled","disabled");let a=this.current_regulation.full_link;this.regulationSetLink(""),setTimeout((()=>{this.regulationSetLink(a),t.removeAttribute("disabled")}),1e3)},deleteRegulation(){(0,k.fH)(`api/regulations/${this.current_regulation.id}`).then((e=>{200!==e.status&&201!==e.status||this.$router.push("/map/regulations")}))}},computed:{...(0,f.Se)("regulations",["regulations","current_regulation"]),...(0,f.Se)("user",["getToken","isAdmin"])},mounted(){null==this.regulations?this.regulationsList().then((e=>{this.regulationInit(this.$route.params.id)})):this.regulationInit(this.$route.params.id)},unmounted(){this.regulationUnset()}};var q=a(4554),v=a(8240),w=a(6778),b=a(151),y=a(5589),C=a(9367),D=a(677),W=a(7518),Z=a.n(W);_.render=h;const x=_;Z()(_,"components",{QIcon:q.Z,QBtn:v.Z,QDialog:w.Z,QCard:b.Z,QCardSection:y.Z,QCardActions:C.Z}),Z()(_,"directives",{ClosePopup:D.Z})}}]);