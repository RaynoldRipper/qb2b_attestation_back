"use strict";(self["webpackChunkquasar_app"]=self["webpackChunkquasar_app"]||[]).push([[925],{1327:(e,t,s)=>{s.d(t,{tC:()=>c,xO:()=>u});var a=s(7083),i=s(52),n=s.n(i),o=(s(3459),s(5343)),l=s(8669),r=s(4434);const u={token:"$P$ByJtUe8KliwKh9WNUDkZFpsvJfm5K11"},c=n().create({baseURL:"https://vo.qb2b.ru",withCredentials:!0});c.interceptors.request.use((e=>{let t=localStorage.getItem("token");return t&&(e.headers["Authorization"]=`Bearer ${t}`),e}),(e=>Promise.reject(e))),c.interceptors.response.use((e=>(e.data.message&&r.Z.create({type:"positive",message:e.data.message}),e)),(e=>(401===e.response.status&&(e.response.message&&r.Z.create({type:"negative",message:e.response.message}),o["default"].dispatch("user/clearStorage"),l.Z.go("/login")),e)));(0,a.xr)((({app:e})=>{e.config.globalProperties.$axios=n(),e.config.globalProperties.$api=c}))},4429:(e,t,s)=>{s.d(t,{CU:()=>i,fH:()=>n,Bm:()=>o});var a=s(5474);s(1327);const i=async(e,t=null)=>new Promise(((s,i)=>{a.api.post(e,t).then((e=>{e.status>=200&&e.status<300?s(e):i(e)})).catch((e=>{i(e)}))})),n=async e=>new Promise(((t,s)=>{a.api["delete"](e).then((e=>{e.status>=200&&e.status<300?t(e):s(e)})).catch((e=>{s(e)}))})),o=async(e,t)=>new Promise(((s,i)=>{a.api.put(e,t).then((e=>{e.status>=200&&e.status<300?s(e):i(e)})).catch((e=>{i(e)}))}))},7925:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var a=s(3673),i=s(2323);const n={key:0},o={key:0,class:"title-container"},l={class:"title--style-1"},r={key:1,class:"q-mt-lg"},u={key:1,class:"q-my-xl"},c=(0,a._)("div",{class:"text-h6"},"Подтвердите действие",-1),d=(0,a.Uk)(" Вы действительно хотите удалить устав? ");function g(e,t,s,g,p,m){const h=(0,a.up)("q-video"),v=(0,a.up)("q-btn"),f=(0,a.up)("q-card-section"),k=(0,a.up)("q-card-actions"),_=(0,a.up)("q-card"),w=(0,a.up)("q-dialog"),q=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[e.current_regulation?((0,a.wg)(),(0,a.iD)("div",n,[null!=e.current_regulation?((0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("h6",l,(0,i.zw)(e.current_regulation.name),1)])):(0,a.kq)("",!0),m.isVideoInstruction(e.current_regulation.crm_id)?((0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(h,{ratio:16/9,src:e.current_regulation.file_store},null,8,["src"])])):(0,a.kq)("",!0)])):(0,a.kq)("",!0),e.isAdmin?((0,a.wg)(),(0,a.iD)("div",u,[(0,a.Wm)(v,{color:"negative",label:"Удалить устав",onClick:t[0]||(t[0]=e=>this.deleteRegulationDialog=!this.deleteRegulationDialog)}),(0,a.Wm)(w,{modelValue:p.deleteRegulationDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>p.deleteRegulationDialog=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[c])),_:1}),(0,a.Wm)(f,{class:"q-pt-none"},{default:(0,a.w5)((()=>[d])),_:1}),(0,a.Wm)(k,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{flat:"",label:"Удалить",color:"negative",onClick:this.deleteRegulation},null,8,["onClick"]),(0,a.wy)((0,a.Wm)(v,{flat:"",label:"Отменить",color:"primary"},null,512),[[q]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])):(0,a.kq)("",!0)],64)}var p=s(3617),m=s(4429);const h={data(){return{deleteRegulationDialog:!1}},methods:{...(0,p.nv)("regulations",["videoInit","regulationUnset","videoInstructioinsList"]),isVideoInstruction(e){return 0===e.indexOf("И")||0===e.indexOf("О")},deleteRegulation(){(0,m.fH)(`api/regulations/${this.current_regulation.id}`).then((e=>{200!==e.status&&201!==e.status||this.$router.push("/map/video")}))}},computed:{...(0,p.Se)("regulations",["video_regulations","current_regulation"]),...(0,p.Se)("user",["getToken","isAdmin"])},mounted(){null==this.video_regulations?this.videoInstructioinsList().then((e=>{this.videoInit(this.$route.params.id)})):this.videoInit(this.$route.params.id)},unmounted(){this.regulationUnset()}};var v=s(1419),f=s(8240),k=s(6778),_=s(151),w=s(5589),q=s(9367),y=s(677),C=s(7518),D=s.n(C);h.render=g;const b=h;D()(h,"components",{QVideo:v.Z,QBtn:f.Z,QDialog:k.Z,QCard:_.Z,QCardSection:w.Z,QCardActions:q.Z}),D()(h,"directives",{ClosePopup:y.Z})}}]);