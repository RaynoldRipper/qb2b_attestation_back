import{u as h,a as v}from"./use-ratio.43afcb1f.js";import{c as _,a as y,h as c,_ as V,a9 as C,ab as g,L as r,a3 as f,ad as Q,S as s,M as t,Q as l,N as o,T as R,K as a,R as k,G as D}from"./index.1a0183c6.js";import{b as S,Q as m,a as I}from"./request-helper.ae3de3f5.js";import{Q as q}from"./axios-vo.d20702b8.js";import{Q as b}from"./QDialog.b8b3baa5.js";import{C as $}from"./ClosePopup.3b6a0631.js";import"./use-dark.a27970f5.js";import"./use-prevent-scroll.fd27a1f1.js";import"./use-timeout.6f0e5abd.js";import"./use-tick.8521d9ee.js";import"./use-model-toggle.5f34f81f.js";import"./focus-manager.02955f48.js";var N=_({name:"QVideo",props:{...h,src:{type:String,required:!0},title:String,fetchpriority:{type:String,default:"auto"},loading:{type:String,default:"eager"},referrerpolicy:{type:String,default:"strict-origin-when-cross-origin"}},setup(e){const i=v(e),n=y(()=>"q-video"+(e.ratio!==void 0?" q-video--responsive":""));return()=>c("div",{class:n.value,style:i.value},[c("iframe",{src:e.src,title:e.title,fetchpriority:e.fetchpriority,loading:e.loading,referrerpolicy:e.referrerpolicy,frameborder:"0",allowfullscreen:!0})])}});const w={data(){return{deleteRegulationDialog:!1}},methods:{...C("regulations",["videoInit","regulationUnset","videoInstructioinsList"]),isVideoInstruction(e){return e.indexOf("\u0418")===0||e.indexOf("\u041E")===0},deleteRegulation(){S(`api/regulations/${this.current_regulation.id}`).then(e=>{(e.status===200||e.status===201)&&this.$router.push("/map/video")})}},computed:{...g("regulations",["video_regulations","current_regulation"]),...g("user",["getToken","isAdmin"])},mounted(){this.video_regulations==null?this.videoInstructioinsList().then(e=>{this.videoInit(this.$route.params.id)}):this.videoInit(this.$route.params.id)},unmounted(){this.regulationUnset()}},A={key:0},B={key:0,class:"title-container"},x={class:"title--style-1"},L={key:1,class:"q-mt-lg"},T={key:1,class:"q-my-xl"},U=f("div",{class:"text-h6"},"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435",-1);function G(e,i,n,M,u,p){return a(),r(R,null,[e.current_regulation?(a(),r("div",A,[e.current_regulation!=null?(a(),r("div",B,[f("h6",x,Q(e.current_regulation.name),1)])):s("",!0),p.isVideoInstruction(e.current_regulation.crm_id)?(a(),r("div",L,[t(N,{ratio:16/9,src:e.current_regulation.file_store},null,8,["src"])])):s("",!0)])):s("",!0),e.isAdmin?(a(),r("div",T,[t(l,{color:"negative",label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0443\u0441\u0442\u0430\u0432",onClick:i[0]||(i[0]=d=>this.deleteRegulationDialog=!this.deleteRegulationDialog)}),t(b,{modelValue:u.deleteRegulationDialog,"onUpdate:modelValue":i[1]||(i[1]=d=>u.deleteRegulationDialog=d)},{default:o(()=>[t(q,null,{default:o(()=>[t(m,null,{default:o(()=>[U]),_:1}),t(m,{class:"q-pt-none"},{default:o(()=>[k(" \u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0443\u0441\u0442\u0430\u0432? ")]),_:1}),t(I,{align:"right"},{default:o(()=>[t(l,{flat:"",label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",color:"negative",onClick:this.deleteRegulation},null,8,["onClick"]),D(t(l,{flat:"",label:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",color:"primary"},null,512),[[$]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):s("",!0)],64)}var Z=V(w,[["render",G]]);export{Z as default};
