import{r as u,o as q,L as Q,a3 as d,M as e,Q as i,N as o,T as _,K as m,G as B,ac as S,O as $,R as y,ad as V}from"./index.0d75c0e2.js";import{e as A,Q as b,a as D,b as I,d as N}from"./request-helper.3cc002ed.js";import{c as R}from"./QSelect.995ba299.js";import{Q as F}from"./QInput.e5465a8e.js";import{Q as M}from"./QSeparator.7e54881b.js";import{Q as O}from"./axios-vo.b437fa41.js";import{Q as P}from"./QDialog.1ae754b6.js";import{Q as g}from"./QItemLabel.b1f8b6a6.js";import{Q as c,a as T}from"./QItem.4a39f3f6.js";import{Q as U}from"./QList.0d2b68e1.js";import{C as G}from"./ClosePopup.a88506ff.js";import{h as z}from"./helper.efd73526.js";import"./use-dark.6d52a316.js";import"./format.dd4f2526.js";import"./use-model-toggle.7b685ac8.js";import"./use-tick.8ea3487b.js";import"./use-timeout.5b4f77f0.js";import"./use-prevent-scroll.9e0ead78.js";import"./focus-manager.02955f48.js";import"./rtl.b51694b1.js";import"./use-form.df8b136a.js";import"./use-id.b996181d.js";import"./uid.42677368.js";const E=d("h2",{class:"title--style-1"}," \u0421\u043F\u0438\u0441\u043E\u043A \u043F\u0440\u0435\u0434\u043E\u0441\u0442\u0430\u0432\u043B\u0435\u043D\u043D\u044B\u0445 \u0434\u043E\u0441\u0442\u0443\u043F\u043E\u0432 ",-1),K={class:"q-mb-md"},j=d("div",{class:"text-h6"},"\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0434\u043E\u0441\u0442\u0443\u043F\u0430",-1),H={class:"q-gutter-xs"},f="api/access-list",Ve={__name:"AccessListPage",setup(J){const s=u(),C=async()=>{const t=await A(f);return s.value=t.data,t},x=t=>t==="phone"?"\u0414\u043E\u0441\u0442\u0443\u043F \u043F\u043E \u043D\u043E\u043C\u0435\u0440\u0443 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430":t==="ip"?"\u0414\u043E\u0441\u0442\u0443\u043F \u043F\u043E ip \u0430\u0434\u0440\u0435\u0441\u0443":t,k=t=>t.type==="phone"?z.phoneFormat(t.value):t.value,n=u(!1),h=[{label:"\u0414\u043E\u0441\u0442\u0443\u043F \u043F\u043E \u043D\u043E\u043C\u0435\u0440\u0443 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430",value:"phone"},{label:"\u0414\u043E\u0441\u0442\u0443\u043F \u043F\u043E ip \u0430\u0434\u0440\u0435\u0441\u0443",value:"ip"}],r=u({value:null,type:null}),w=async t=>{const a=await I(`${f}/${t}`),l=s.value.find(v=>v.id===t);return s.value.splice(s.value.indexOf(l),1),a},p=u(!1),L=async t=>{p.value=!0;const a=await N(f,t).finally(()=>p.value=!1);return s.value.push(a.data),n.value=!1,a};return q(async()=>{await C()}),(t,a)=>(m(),Q(_,null,[E,d("div",K,[e(i,{label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0434\u043E\u0441\u0442\u0443\u043F",color:"primary","no-caps":"",onClick:a[0]||(a[0]=l=>n.value=!0)}),e(P,{modelValue:n.value,"onUpdate:modelValue":a[4]||(a[4]=l=>n.value=l)},{default:o(()=>[e(O,{style:{"min-width":"320px"}},{default:o(()=>[e(b,null,{default:o(()=>[j]),_:1}),e(b,{class:"q-gutter-md"},{default:o(()=>[e(R,{modelValue:r.value.type,"onUpdate:modelValue":a[1]||(a[1]=l=>r.value.type=l),"emit-value":"",options:h,label:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043F \u0434\u043E\u0441\u0442\u0443\u043F\u0430"},null,8,["modelValue"]),e(F,{modelValue:r.value.value,"onUpdate:modelValue":a[2]||(a[2]=l=>r.value.value=l),label:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0433\u043E \u0442\u0438\u043F\u0430 \u0434\u043E\u0441\u0442\u0443\u043F\u0430"},null,8,["modelValue"])]),_:1}),e(M),e(D,null,{default:o(()=>[e(i,{label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",loading:p.value,color:"positive","no-caps":"",flat:"",onClick:a[3]||(a[3]=l=>L(r.value))},null,8,["loading"]),B(e(i,{label:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C","no-caps":"",flat:""},null,512),[[G]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),e(U,{bordered:"",separator:""},{default:o(()=>[(m(!0),Q(_,null,S(s.value,l=>(m(),$(T,{key:l},{default:o(()=>[e(c,null,{default:o(()=>[e(g,null,{default:o(()=>[y(V(x(l.type)),1)]),_:2},1024)]),_:2},1024),e(c,null,{default:o(()=>[e(g,null,{default:o(()=>[y(V(k(l)),1)]),_:2},1024)]),_:2},1024),e(c,{top:"",side:""},{default:o(()=>[d("div",H,[e(i,{icon:"delete",round:"",size:"sm",onClick:v=>w(l.id)},null,8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})],64))}};export{Ve as default};
