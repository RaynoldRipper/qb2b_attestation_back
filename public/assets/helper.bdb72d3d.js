import{c as j,r,a as d,w as D,f as F,h as a,Z as I,b as Q,al as L}from"./index.36054768.js";import{u as N,a as E}from"./use-ratio.9287db9e.js";const H=16/9;var U=j({name:"QImg",props:{...N,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:H},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:f,emit:v}){const h=r(e.initialRatio),S=E(e,h);let i=null,s=!1;const l=[r(null),r(m())],n=r(0),u=r(!1),o=r(!1),w=d(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),C=d(()=>({width:e.width,height:e.height})),T=d(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),$=d(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));D(()=>y(),_);function y(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function m(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function _(t){i!==null&&(clearTimeout(i),i=null),o.value=!1,t===null?(u.value=!1,l[n.value^1].value=m()):u.value=!0,l[n.value].value=t}function z({target:t}){s!==!0&&(i!==null&&(clearTimeout(i),i=null),h.value=t.naturalHeight===0?.5:t.naturalWidth/t.naturalHeight,b(t,1))}function b(t,c){s===!0||c===1e3||(t.complete===!0?R(t):i=setTimeout(()=>{i=null,b(t,c+1)},50))}function R(t){s!==!0&&(n.value=n.value^1,l[n.value].value=null,u.value=!1,o.value=!1,v("load",t.currentSrc||t.src))}function k(t){i!==null&&(clearTimeout(i),i=null),u.value=!1,o.value=!0,l[n.value].value=null,l[n.value^1].value=m(),v("error",t)}function q(t){const c=l[t].value,g={key:"img_"+t,class:T.value,style:$.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...c};return n.value===t?(g.class+=" q-img__image--waiting",Object.assign(g,{onLoad:z,onError:k})):g.class+=" q-img__image--loaded",a("div",{class:"q-img__container absolute-full",key:"img"+t},a("img",g))}function B(){return u.value!==!0?a("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},Q(f[o.value===!0?"error":"default"])):a("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},f.loading!==void 0?f.loading():e.noSpinner===!0?void 0:[a(L,{color:e.spinnerColor,size:e.spinnerSize})])}return _(y()),F(()=>{s=!0,i!==null&&(clearTimeout(i),i=null)}),()=>{const t=[];return S.value!==null&&t.push(a("div",{key:"filler",style:S.value})),o.value!==!0&&(l[0].value!==null&&t.push(q(0)),l[1].value!==null&&t.push(q(1))),t.push(a(I,{name:"q-transition--fade"},B)),a("div",{class:w.value,style:C.value,role:"img","aria-label":e.alt},t)}}});const M={phoneFormat(e){return e.toString().replace(/\D+/g,"").replace(/(\d{1})(\d{3})(\d{3})(\d{2})(\d{2})/,"$1-($2)-$3-$4-$5")},dateFormat(e){return new Date(e).toLocaleDateString()}};var W=M;export{U as Q,W as h};
