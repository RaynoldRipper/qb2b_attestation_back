import{a9 as p,ab as f,_ as h,K as r,L as i,a3 as c,T,ac as b,ae as w,ad as S,S as o,J as m,M as _,O as A}from"./index.4abb149c.js";function k(t){let e=t.length,s;for(;e!=0;)s=Math.floor(Math.random()*e),e--,[t[e],t[s]]=[t[s],t[e]];return t}const g={data(){return{redSuccess:[],blackSuccess:[],fullSuccess:[],userArray:[],fullObject:[],results:{},alphabet:"\u0430 \u0431 \u0432 \u0433 \u0434 \u0435 \u0451 \u0436 \u0437 \u0438 \u0439 \u043A \u043B \u043C \u043D \u043E \u043F \u0440 \u0441 \u0442 \u0443 \u0444 \u0445 \u0446 \u0447 \u0448 \u0449 \u044A \u044B \u044C \u044D \u044E \u044F".split(" ")}},emits:["push-data"],props:{red:Number,black:Number,testStatus:String},methods:{...p("tests",["saveUserTest"]),dataGenerator(){for(let e=0;e<this.red;e++){let s=this.alphabet[Math.floor(Math.random()*this.alphabet.length)];this.redSuccess.push(s)}for(let e=0;e<this.black;e++){let s=this.alphabet[Math.floor(Math.random()*this.alphabet.length)];this.blackSuccess.push(s)}let t=this.blackSuccess.length>this.redSuccess.length?this.blackSuccess.length:this.redSuccess.length;for(let e=0;e<t;e++){if(typeof this.redSuccess[e]!="undefined"){let s={color:"red",number:this.redSuccess.length-e,letter:this.redSuccess[e]};this.fullSuccess.push(this.redSuccess[e]),this.fullObject.push(s)}if(typeof this.blackSuccess[e]!="undefined"){let s={color:"black",number:e+1,letter:this.blackSuccess[e]};this.fullSuccess.push(this.blackSuccess[e]),this.fullObject.push(s)}}k(this.fullObject)},userCheck(t){if(this.testStatus==="PROCESS"){let e=t.target;this.userArray.push(this.fullObject[e.dataset.index].letter),this.$emit("push-data",{fullSuccess:this.fullSuccess,userArray:this.userArray,testStatus:this.testStatus})}},keyDown(t){let e="\u0430 \u0431 \u0432 \u0433 \u0434 \u0435 \u0451 \u0436 \u0437 \u0438 \u0439 \u043A \u043B \u043C \u043D \u043E \u043F \u0440 \u0441 \u0442 \u0443 \u0444 \u0445 \u0446 \u0447 \u0448 \u0449 \u044A \u044B \u044C \u044D \u044E \u044F ",s=(e.toUpperCase()+e).split(" ");if(this.testStatus==="PROCESS")if(s.indexOf(t.key)!==-1){let l=t.key.toLowerCase();this.userArray.push(l),this.$emit("push-data",{fullSuccess:this.fullSuccess,userArray:this.userArray,testStatus:this.testStatus})}else t.code==="Backspace"&&(this.userArray.splice(-1,1),this.$emit("push-data",{fullSuccess:this.fullSuccess,userArray:this.userArray,testStatus:this.testStatus}))}},computed:{...f("user",["getUser"]),...f("tests",["attestationId"])},mounted(){this.attestationId===null&&this.$router.push("/tests")},created(){document.addEventListener("keydown",this.keyDown)},watch:{testStatus(){if(this.testStatus==="STARTED"&&this.dataGenerator(),this.testStatus==="FINISHED"){this.results.symbols=this.userArray.length,this.results.successSymbols=0,this.userArray.forEach((e,s)=>{e==this.fullSuccess[s]&&(this.results.successSymbols=this.results.successSymbols+1)});let t={fullSuccess:this.fullSuccess,userArray:this.userArray,results:this.results,table:!0,test_id:2,user_id:this.getUser.id,attestation_id:this.attestationId};this.saveUserTest(t).then(e=>{this.$router.push("/tests")})}}}},v={key:0,class:"flex-container"},C={class:"table"},I=["data-index"];function x(t,e,s,l,a,u){return s.testStatus!=="FINISHED"?(r(),i("div",v,[c("div",C,[(r(!0),i(T,null,b(this.fullObject,(n,d)=>(r(),i("div",{class:w(["table-item",n.color]),key:n,"data-index":d},S(n.letter)+"-"+S(n.number),11,I))),128))])])):o("",!0)}var L=h(g,[["render",x]]),$="/assets/test-2.e4f404b0.gif";const E={emits:["timer-start","change-status"],props:{testStatus:String,userArray:Array},methods:{startTimer(){this.$emit("timer-start"),this.$emit("change-status","STARTED")},sendToServer(){}}},N={class:"info text-center"},O={key:0},D=c("h4",{class:"text-center"},"\u0422\u0435\u0441\u0442 \u043A\u0440\u0430\u0441\u043D\u043E-\u0447\u0435\u0440\u043D\u0430\u044F \u0442\u0430\u0431\u043B\u0438\u0446\u0430",-1),G=c("p",{class:"info__text"},' \u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u043E\u0442\u044B\u0441\u043A\u0438\u0432\u0430\u0442\u044C \u043A\u0440\u0430\u0441\u043D\u044B\u0435 \u0438 \u0447\u0435\u0440\u043D\u044B\u0435 \u0447\u0438\u0441\u043B\u0430 \u043F\u043E\u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u043E, \u043F\u0440\u0438\u0447\u0451\u043C, \u043A\u0440\u0430\u0441\u043D\u044B\u0435 \u0432 \u0443\u0431\u044B\u0432\u0430\u044E\u0449\u0435\u043C \u043F\u043E\u0440\u044F\u0434\u043A\u0435, \u043E\u0442 25 \u0434\u043E 1, \u0430 \u0447\u0435\u0440\u043D\u044B\u0435 \u0432 \u0432\u043E\u0437\u0440\u0430\u0441\u0442\u0430\u044E\u0449\u0435\u043C \u2014 \u043E\u0442 1 \u0434\u043E 24. \u0417\u0430\u043F\u0438\u0441\u044B\u0432\u0430\u0442\u044C \u043D\u0430\u0434\u043E \u0442\u043E\u043B\u044C\u043A\u043E \u0431\u0443\u043A\u0432\u044B, \u0441\u0442\u043E\u044F\u0449\u0438\u0435 \u0440\u044F\u0434\u043E\u043C \u0441 \u0447\u0438\u0441\u043B\u0430\u043C\u0438. \u0412\u0440\u0435\u043C\u044F \u0440\u0430\u0431\u043E\u0442\u044B \u2014 5 \u043C\u0438\u043D\u0443\u0442". ',-1),R=c("p",{class:"sub-text"},"\u0421\u043D\u0438\u0437\u0443 \u043F\u043E\u043A\u0430\u0437\u0430\u043D \u043F\u0440\u0438\u043C\u0435\u0440",-1),M=c("img",{class:"img",alt:"Test 2",src:$},null,-1),j=[D,G,R,M],P={key:1,class:""},B=c("p",{class:"text-center"},[c("b",null,"\u0417\u0430\u043F\u0438\u0441\u0430\u043D\u044B\u0435 \u0431\u0443\u043A\u0432\u044B")],-1),F={class:"info__text text-left"},U={key:2,class:"buttons-wrap"};function H(t,e,s,l,a,u){return r(),i("div",N,[s.testStatus==="WAITING"?(r(),i("div",O,j)):s.testStatus==="STARTED"||s.testStatus==="PROCESS"?(r(),i("div",P,[B,c("p",F,[(r(!0),i(T,null,b(s.userArray,n=>(r(),i("span",{class:"info__symbol",key:n},S(n),1))),128))])])):o("",!0),s.testStatus==="WAITING"||s.testStatus==="FINISHED"||s.testStatus==="STORAGE"?(r(),i("div",U,[s.testStatus==="WAITING"?(r(),i("button",{key:0,class:"btn btn--main",onClick:e[0]||(e[0]=(...n)=>u.startTimer&&u.startTimer(...n))},"\u042F \u0433\u043E\u0442\u043E\u0432(-\u0430), \u043D\u0430\u0447\u0430\u0442\u044C!")):o("",!0)])):o("",!0)])}var W=h(E,[["render",H]]);const V={data(){return{newTime:this.currentTime,newTimeLeft:this.timeLeft,newTimer:this.timer,newTimerStatus:0}},props:{currentTime:Number,timeLeft:Number,timer:Number,testStatus:String},emits:["timer-sync"],methods:{timerStyle(){let t=Math.floor(this.newTime/60)>9?Math.floor(this.newTime/60):"0"+Math.floor(this.newTime/60),e=this.newTime-t*60>9?this.newTime-t*60:"0"+(this.newTime-t*60).toString();return`${t}:${e}`},startTimer(){this.newTimerStatus==0&&this.newTime!==0&&(this.newTimer=setInterval(()=>{this.newTimerStatus=1,this.newTime--,this.newTimeLeft++,this.$emit("timer-sync",{newTime:this.newTime,newTimeLeft:this.newTimeLeft,newTimer:this.newTimer,newTimerStatus:this.newTimerStatus,testStatus:"PROCESS"})},1e3))},stopTimer(){clearTimeout(this.newTimer);let t=this.newTime!==0?"PROCESS":"FINISHED";this.newTimerStatus=0,this.$emit("timer-sync",{newTime:this.newTime,newTimeLeft:this.newTimeLeft,newTimer:this.newTimer,newTimerStatus:this.newTimerStatus,testStatus:t})}},unmounted(){this.stopTimer()},mounted(){},watch:{newTime(t){t===0&&this.stopTimer()}}},J={key:0,class:"timer-wrapper timer-wrapper--sticky"},z={key:0,class:"timer"},K={key:1,class:"timer-out"};function q(t,e,s,l,a,u){return s.testStatus!=="STORAGE"?(r(),i("div",J,[s.currentTime>0?(r(),i("div",z,S(u.timerStyle()),1)):s.currentTime===0?(r(),i("div",K,"\u0412\u0440\u0435\u043C\u044F \u0432\u044B\u0448\u043B\u043E!")):o("",!0)])):o("",!0)}var Q=h(V,[["render",q]]);const X={data(){return{currentTime:300,timeLeft:0,timer:null,timerStatus:0,red:25,black:24,userArray:[],fullSuccess:[],testStatus:"WAITING"}},components:{ColorTableGenerate:L,ColorTableInfo:W,Timer:Q},methods:{syncTimer(t){this.currentTime=t.newTime,this.timeLeft=t.newTimeLeft,this.timer=t.newTimer,this.timerStatus=t.newTimerStatus,this.testStatus=t.testStatus},syncData(t){this.userArray=t.userArray,this.fullSuccess=t.fullSuccess,this.testStatus=t.testStatus},startTimer(){this.$refs.start.startTimer()},changeStatus(t){this.testStatus=t}},mounted(){if(typeof localStorage.table!="undefined"){let t=JSON.parse(localStorage.table);this.fullSuccess=t.fullSuccess,this.userArray=t.userArray,this.testStatus="STORAGE"}}},Y={class:"container container-md"};function Z(t,e,s,l,a,u){const n=m("Timer"),d=m("ColorTableInfo"),y=m("ColorTableGenerate");return r(),i("div",Y,[_(n,{testStatus:a.testStatus,currentTime:a.currentTime,timeLeft:a.timeLeft,timer:a.timer,onTimerSync:u.syncTimer,ref:"start"},null,8,["testStatus","currentTime","timeLeft","timer","onTimerSync"]),_(d,{testStatus:a.testStatus,userArray:a.userArray,onTimerStart:u.startTimer,onChangeStatus:u.changeStatus},null,8,["testStatus","userArray","onTimerStart","onChangeStatus"]),_(y,{red:a.red,black:a.black,testStatus:a.testStatus,onPushData:u.syncData},null,8,["red","black","testStatus","onPushData"])])}var tt=h(X,[["render",Z]]);const et={components:{ColorTableComponent:tt}};function st(t,e,s,l,a,u){const n=m("ColorTableComponent");return r(),A(n)}var it=h(et,[["render",st]]);export{it as default};
