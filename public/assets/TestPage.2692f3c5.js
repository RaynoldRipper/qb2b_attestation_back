import{h as N,c as M,_ as b,K as n,O as c,N as l,M as a,a3 as o,a9 as $,aa as q,ab as A,J as x,L as u,T as S,ac as I,ad as m,R as _,Q as y,S as k,G as B,a2 as G,ae as H}from"./index.9eb2ac42.js";import{Q as p,a as w}from"./QBadge.9210d64f.js";import{a as C,Q as U}from"./QItem.e11b0b2d.js";import{Q as L}from"./QList.f79466e0.js";import{Q as P}from"./QImg.aabc9cc1.js";import{Q as f,a as D,d as V}from"./request-helper.aa1b8491.js";import{Q as W}from"./QSeparator.cddfdfd5.js";import{Q as z}from"./QSlideTransition.38e57559.js";import{Q as E}from"./axios-vo.cd39899b.js";import{Q}from"./QItemLabel.aefaf42d.js";import{I as F}from"./InfoMessage.6aca8587.js";import{h as R}from"./helper.efd73526.js";import{L as J}from"./MainLogo.c9e5f1ef.js";import"./use-dark.04b71f89.js";import"./use-ratio.361b4d3f.js";import"./use-timeout.70c9d1fe.js";const O=N("div",{class:"q-space"});var Y=M({name:"QSpace",setup(){return()=>O}});const K={},j={class:"text-h5 q-mt-sm q-mb-lg"},X={class:"text-caption text-grey"},Z={class:"q-mt-sm q-mb-lg"};function tt(t,e,h,d,i,r){return n(),c(E,{class:"my-card col-lg",style:{width:"100%"}},{default:l(()=>[a(f,{horizontal:"",class:"row"},{default:l(()=>[a(p,{class:"col col-sm-4",height:"230px",square:""}),a(f,{class:"col-12 col-sm-8",style:{padding:"0px 16px"}},{default:l(()=>[a(f,null,{default:l(()=>[o("div",j,[a(p,{type:"rect",width:"60%"})]),o("div",X,[a(Q,null,{default:l(()=>[a(p,{type:"text"})]),_:1}),a(Q,null,{default:l(()=>[a(p,{type:"text"})]),_:1}),a(Q,null,{default:l(()=>[a(p,{type:"text"})]),_:1})])]),_:1}),a(D,{class:"col-12",style:{padding:"0px 16px"}},{default:l(()=>[o("div",Z,[a(p,{type:"QBtn",width:"150px",height:"30px"})])]),_:1})]),_:1})]),_:1})]),_:1})}var et=b(K,[["render",tt]]);const st={components:{TestSkeleton:et},data(){return{tests:null,usersTests:null,skelletonCounts:4}},methods:{...$("tests",["expandedToggle","archivateUserTest","testReset"]),testResult(t){return q.testResult(t)},testStatus(t){let e={};return t==="PASSED"?(e.message="\u0422\u0435\u0441\u0442 \u043F\u0440\u043E\u0439\u0434\u0435\u043D!",e.color="positive"):t==="FAILED"?(e.message="\u0422\u0435\u0441\u0442 \u043D\u0435 \u043F\u0440\u043E\u0439\u0434\u0435\u043D!",e.color="negative"):(e.message="\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u043F\u0440\u043E\u0439\u0442\u0438 \u0442\u0435\u0441\u0442!",e.color="secondary"),e},userTestRestart(t){let e=this.getTests[t];this.archivateUserTest(e).then(h=>{let d;e.id==1?d="correcture":e.id==2?d="table":e.id==3?d="service-book":e.id==4?d="product-book":e.id==7&&(d="typing-test"),this.testReset(t),localStorage.removeItem(d),this.$router.push(`/tests/${d}`)})},disabledInit(t){let e=this.tests[t-1];if(typeof e!="undefined"&&(e.status==="WAITING"||e.status==="FAILED"&&e.slug!=="typing-test"))return"disabled"}},mounted(){this.tests=this.getTests,this.usersTests=this.getUserTests},computed:{...A("user",["getUser"]),...A("tests",["getUserTests","testPassed","getTests"])}},at={key:0,style:{width:"100%",height:"100%"}},ot={class:"absolute-bottom"},nt={class:"text-subtitle2"},lt={class:"text-h5 q-mt-sm q-mb-xs"},rt={class:"text-caption text-grey"},it={key:0};function ct(t,e,h,d,i,r){const g=x("TestSkeleton");return i.tests===null?(n(),u("div",at,[(n(!0),u(S,null,I(i.skelletonCounts,s=>(n(),c(g,{key:s,style:{"margin-bottom":"15px"}}))),128))])):(n(!0),u(S,{key:1},I(i.tests,(s,T)=>(n(),c(E,{class:H(["my-card col-12",r.disabledInit(T)]),key:T},{default:l(()=>[a(f,{horizontal:"",class:"row"},{default:l(()=>[a(P,{src:s.image,class:"col col-sm-4"},{default:l(()=>[o("div",ot,[o("div",nt,m(s.name),1)])]),_:2},1032,["src"]),a(f,{class:"col-12 col-sm-8"},{default:l(()=>[a(f,null,{default:l(()=>[o("div",lt,[_(m(s.name)+" ",1),a(w,{color:r.testStatus(s.status).color,floating:"",transparent:""},{default:l(()=>[_(m(r.testStatus(s.status).message),1)]),_:2},1032,["color"])]),o("div",rt,m(s.description),1)]),_:2},1024),a(D,{class:"col-12"},{default:l(()=>[s.status==="WAITING"?(n(),c(y,{key:0,flat:"",to:"/tests/"+s.slug},{default:l(()=>[_("\u041F\u0440\u0438\u0441\u0442\u0443\u043F\u0438\u0442\u044C")]),_:2},1032,["to"])):k("",!0),(s.status==="PASSED"||s.status==="FAILED")&&(s.id<5||s.id>6)?(n(),c(y,{key:1,flat:"",onClick:v=>r.userTestRestart(T)},{default:l(()=>[_("\u041F\u0440\u043E\u0439\u0442\u0438 \u0437\u0430\u043D\u043E\u0432\u043E ")]),_:2},1032,["onClick"])):k("",!0),s.id===5&&s.status!=="WAITING"?(n(),c(y,{key:2,flat:"",to:"/tests/"+s.slug},{default:l(()=>[_("\u041F\u0440\u043E\u0433\u0440\u0435\u0441\u0441 ")]),_:2},1032,["to"])):k("",!0),s.id===6&&s.status!=="WAITING"?(n(),c(y,{key:3,flat:"",to:"/tests/"+s.slug},{default:l(()=>[_("\u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0432\u0438\u0434\u0435\u043E-\u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B ")]),_:2},1032,["to"])):k("",!0),a(Y),(s.status==="PASSED"||s.status==="FAILED"||s.id===5)&&s.id!==6?(n(),c(y,{key:4,color:"grey",flat:"",dense:"",icon:s.expanded?"keyboard_arrow_up":"keyboard_arrow_down",onClick:v=>this.expandedToggle(T),label:"\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B"},null,8,["icon","onClick"])):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024),a(z,null,{default:l(()=>[s.status==="PASSED"||s.status==="FAILED"||s.id===5?B((n(),u("div",it,[a(W),a(f,{class:"text-subitle2",innerHTML:r.testResult(s)},null,8,["innerHTML"])],512)),[[G,s.expanded]]):k("",!0)]),_:2},1024)]),_:2},1032,["class"]))),128))}var ut=b(st,[["render",ct]]);const dt={components:{Info:F},props:{text_count:Number}},_t={class:"col-12"},mt={class:"title-container"},ht={class:"text-container q-mt-xl"};function pt(t,e,h,d,i,r){const g=x("Info");return n(),u("div",_t,[o("div",mt,[a(p,{width:"280px",height:"34px",class:"q-mx-auto"})]),o("div",ht,[(n(!0),u(S,null,I(h.text_count,s=>(n(),c(p,{class:"q-mb-sm",width:"100%",height:"20px",key:s}))),128)),a(g,{message_type:"info"})])])}var ft=b(dt,[["render",pt]]);const gt={components:{AttestationTests:ut,AttestationSkelleton:ft,Info:F},data(){return{attestation_status:null,skelleton_count:4,attestation:null}},methods:{...$("tests",["showAttestation","createAttestation","loadTests","loadUserTests","loadFullAttestationInfo"]),newAttestation(){this.createAttestation(this.getUserId).then(t=>{(t.status===200||t.status===201)&&this.fullTests()})},testStatus(t){let e={};return t==="PASSED"?(e.message="\u0422\u0435\u0441\u0442 \u043F\u0440\u043E\u0439\u0434\u0435\u043D!",e.color="positive"):t==="FAILED"?(e.message="\u0422\u0435\u0441\u0442 \u043D\u0435 \u043F\u0440\u043E\u0439\u0434\u0435\u043D!",e.color="negative"):(e.message="\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u043F\u0440\u043E\u0439\u0442\u0438 \u0442\u0435\u0441\u0442!",e.color="secondary"),e},fullTests(){this.loadFullAttestationInfo(this.getUserId).then(t=>{if(t.status===200){let e=t.data.attestation;this.attestation=e,this.attestation_status=e.status}})},dateFormat(t){if(t)return R.dateFormat(t)}},computed:{...A("user",["getUser","getUserId"]),...A("tests",["attestationStatus"])},mounted(){this.fullTests()}},yt={key:1,class:"col-12"},vt=o("div",{class:"title-container"},[o("h3",{class:"title--style-1 q-pb-md"},[o("span",{class:"text-primary"},"\u0410\u0442\u0442\u0435\u0441\u0442\u0430\u0446\u0438\u044F")])],-1),kt={class:"text-container"},xt=o("p",{class:"text--style-1"},[_(" \u0414\u043B\u044F \u0443\u0441\u043F\u0435\u0448\u043D\u043E\u0433\u043E \u043F\u0440\u043E\u0445\u043E\u0436\u0434\u0435\u043D\u0438\u044F \u0430\u0442\u0442\u0435\u0441\u0442\u0430\u0446\u0438\u0438 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u043F\u0440\u043E\u0439\u0442\u0438 6 \u044D\u0442\u0430\u043F\u043E\u0432: "),o("ul",null,[o("li",null,"\u0422\u0435\u0441\u0442 \u043D\u0430 \u0432\u043D\u0438\u043C\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C"),o("li",null,"\u0422\u0435\u0441\u0442 \u043D\u0430 \u043F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0435 \u0432\u043D\u0438\u043C\u0430\u043D\u0438\u044F"),o("li",null,"\u041A\u043D\u0438\u0433\u0430 \u0441\u0435\u0440\u0432\u0438\u0441\u0430 \u041A\u0423\u04112\u0411"),o("li",null,"\u041A\u043D\u0438\u0433\u0430 \u043F\u0440\u043E\u0434\u0443\u043A\u0442\u0430 \u041A\u0423\u04112\u0411"),o("li",null,"\u041A\u0430\u0440\u0442\u0430 \u041A\u0423\u04112\u0411"),o("li",null,"\u0412\u0438\u0434\u0435\u043E \u043E\u0431\u0443\u0447\u0435\u043D\u0438\u0435")]),_(" \u042D\u0442\u0430\u043F\u044B \u0431\u0443\u0434\u0443\u0442 \u043F\u0440\u043E\u0445\u043E\u0434\u0438\u0442\u044C \u043F\u043E\u0441\u043B\u0435\u0434\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u043D\u043E, \u043D\u0435 \u043F\u0440\u043E\u0439\u0434\u044F \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0442\u0435\u043A\u0443\u0449\u0438\u0439 \u044D\u0442\u0430\u043F, \u043D\u0435\u043B\u044C\u0437\u044F \u043F\u0435\u0440\u0435\u0439\u0442\u0438 \u043A \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C\u0443. \u041D\u0435 \u0432\u043E\u043B\u043D\u0443\u0439\u0441\u044F, \u0443 \u0442\u0435\u0431\u044F \u0431\u0443\u0434\u0435\u0442 \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u044C \u043F\u0435\u0440\u0435\u043F\u0440\u043E\u0439\u0442\u0438 \u044D\u0442\u0430\u043F, \u0435\u0441\u043B\u0438 \u0447\u0442\u043E \u0442\u043E \u043F\u043E\u0439\u0434\u0435\u0442 \u043D\u0435 \u0442\u0430\u043A \u0438\u043B\u0438 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442 \u0431\u0443\u0434\u0435\u0442 \u043D\u0435\u0443\u0434\u043E\u0432\u043B\u0435\u0442\u0432\u043E\u0440\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C. ")],-1),At={key:0,class:"attestation"},Tt={key:1},St={class:"attestation-head q-pa-md"},It={class:"text--style-2"},bt={class:"q-ml-auto"},$t={class:"buttons-wrap"},Ut={key:1},Qt={class:"buttons-wrap"};function qt(t,e,h,d,i,r){const g=x("AttestationSkelleton"),s=x("Info"),T=x("AttestationTests");return i.attestation_status==null?(n(),c(g,{key:0,text_count:8})):i.attestation_status=="EMPTY"||i.attestation_status=="WAITING"?(n(),u("div",yt,[vt,o("div",kt,[xt,a(s,{message_type:"info",message_text:"\u0415\u0441\u043B\u0438 \u0447\u0442\u043E \u0442\u043E \u043D\u0435 \u043F\u043E\u043D\u044F\u0442\u043D\u043E, \u043C\u043E\u0436\u0435\u0448\u044C \u0441\u043C\u0435\u043B\u043E \u043F\u043E\u043F\u0440\u043E\u0441\u0438\u0442\u044C \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044F \u043E\u0431\u044A\u044F\u0441\u043D\u0438\u0442\u044C."},null,8,["message_text"])]),i.attestation_status!="EMPTY"?(n(),u("div",At,[i.attestation==null?(n(),c(L,{key:0,bordered:"",separator:""},{default:l(()=>[(n(!0),u(S,null,I(i.skelleton_count,v=>(n(),c(C,{key:v},{default:l(()=>[a(U,null,{default:l(()=>[a(p,{height:"15px"})]),_:1})]),_:2},1024))),128))]),_:1})):(n(),u("div",Tt,[o("div",St,[o("span",It,"\u0414\u0430\u0442\u0430 \u043D\u0430\u0447\u0430\u043B\u0430 \u0430\u0442\u0442\u0435\u0441\u0442\u0430\u0446\u0438\u0438: "+m(r.dateFormat(i.attestation.date_start)),1)]),a(L,{bordered:"",separator:""},{default:l(()=>[(n(!0),u(S,null,I(i.attestation.merged_tests,v=>(n(),c(C,{key:v},{default:l(()=>[a(U,null,{default:l(()=>[_(m(v.name),1)]),_:2},1024),a(U,null,{default:l(()=>[o("div",bt,[a(w,{color:r.testStatus(v.status).color},{default:l(()=>[_(m(r.testStatus(v.status).message),1)]),_:2},1032,["color"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})])),o("div",$t,[i.attestation!=null?(n(),c(y,{key:0,color:"primary",label:"\u041D\u0430\u0447\u0430\u0442\u044C \u0430\u0442\u0442\u0435\u0441\u0442\u0430\u0446\u0438\u044E"})):(n(),c(p,{key:1,type:"QBtn",width:"150px",height:"30px",class:"q-ma-auto"}))])])):(n(),u("div",Ut,[o("div",Qt,[a(y,{color:"primary",label:"\u041D\u0430\u0447\u0430\u0442\u044C \u0430\u0442\u0442\u0435\u0441\u0442\u0430\u0446\u0438\u044E",onClick:r.newAttestation},null,8,["onClick"])])]))])):i.attestation_status=="STARTED"||i.attestation_status=="RESERVE_STARTED"?(n(),c(T,{key:2})):k("",!0)}var wt=b(gt,[["render",qt]]);const Et={components:{Logo:J},methods:{...$("tests",["finishAttestation","archivateAttestation","loadFullAttestationInfo"]),testStatus(t){return q.testStatus(t)},testResult(t){return q.testResult(t)},dateFormat(t){return R.dateFormat(t)},newAttestation(){this.createAttestation(this.getUserId).then(t=>{(t.status===200||t.status===201)&&this.loadFullAttestationInfo(this.getUserId).then(e=>{if(e.status===200){let h=e.data.attestation;this.attestation=h,this.attestation_status=h.status}})})}},computed:{...A("tests",["attestationStatus","getTests","getAttestation"]),...A("user",["getUser","getUserId"]),fullName(){return this.getUser!==null?`${this.getUser.family} ${this.getUser.name} ${this.getUser.middle_name}`:""}}},Ct={key:0},Lt={class:"q-mx-auto"},Pt={class:"title-container"},Dt={class:"title--style-1"},Ft=o("div",{class:"text-container q-mb-xl"},[o("p",{class:"text-center q-mt-lg text-body1"},"\u0422\u0435\u043F\u0435\u0440 \u0432\u0430\u043C \u043E\u0441\u0442\u0430\u043B\u0441\u044C \u043B\u0438\u0448\u044C \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C \u0430\u0442\u0442\u0435\u0441\u0442\u0430\u0446\u0438\u044E \u043D\u0430\u0436\u0430\u0432 \u043D\u0430 \u043A\u043D\u043E\u043F\u043A\u0443 \u043D\u0438\u0436\u0435 \u0438 \u0441\u043E\u043E\u0431\u0449\u0438\u0442\u044C \u043E \u043F\u0440\u043E\u0445\u043E\u0436\u0434\u0435\u043D\u0438\u0438 \u0430\u0442\u0442\u0435\u0441\u0442\u0430\u0446\u0438\u0438 \u0441\u0432\u043E\u0435\u043C\u0443 \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044E.")],-1),Rt={class:"buttons-wrap"},Nt={key:1},Mt={class:"title-container"},Bt=o("h3",{class:"title--style-1"},"\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u043F\u0440\u043E\u0439\u0434\u0435\u043D\u043D\u043E\u0439 \u0430\u0442\u0442\u0435\u0441\u0442\u0430\u0446\u0438\u0438",-1),Gt={class:"q-pb-md text-center"},Ht={class:"absolute-bottom"},Vt={class:"text-subtitle2"},Wt={class:"text-h6 q-mt-sm q-mb-xs"},zt=["innerHTML"],Jt={class:"buttons-wrap"};function Ot(t,e,h,d,i,r){const g=x("Logo");return t.attestationStatus!=="PASSED"?(n(),u("div",Ct,[o("div",Lt,[a(g)]),o("div",Pt,[o("h3",Dt,m(r.fullName)+", \u043F\u043E\u0437\u0434\u0440\u0430\u0432\u043B\u044F\u0435\u043C! \u0412\u044B \u043F\u0440\u043E\u0448\u043B\u0438 \u0430\u0442\u0442\u0435\u0441\u0442\u0430\u0446\u0438\u044E \u0432 \u043A\u043E\u043C\u043F\u0430\u043D\u0438\u0438 \u041A\u0423\u04112\u0411 \u0438 \u0433\u043E\u0442\u043E\u0432\u044B \u043A \u0440\u0430\u0431\u043E\u0442\u0435 \u0432 \u043D\u0430\u0448\u0435\u0439 \u043A\u043E\u043C\u0430\u043D\u0434\u0435!",1)]),Ft,o("div",Rt,[a(y,{color:"primary",label:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C \u0430\u0442\u0442\u0435\u0441\u0442\u0430\u0446\u0438\u044E",onClick:e[0]||(e[0]=s=>this.finishAttestation(this.getUserId))})])])):(n(),u("div",Nt,[o("div",Mt,[Bt,o("p",Gt,"\u0414\u0430\u0442\u0430 \u043F\u0440\u043E\u0445\u043E\u0436\u0434\u0435\u043D\u0438\u044F \u0430\u0442\u0442\u0435\u0441\u0442\u0430\u0446\u0438\u0438 "+m(r.dateFormat(t.getAttestation.date_end)),1)]),(n(!0),u(S,null,I(t.getTests,s=>(n(),c(E,{class:"my-card q-mb-md",key:s},{default:l(()=>[a(f,{horizontal:"",class:"row"},{default:l(()=>[a(P,{class:"col col-sm-3",src:s.image},{default:l(()=>[o("div",Ht,[o("div",Vt,m(s.name),1)])]),_:2},1032,["src"]),a(f,{class:"col-12 col-sm-9"},{default:l(()=>[a(f,{class:"p-0"},{default:l(()=>[o("div",Wt,[_(' \u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u0442\u0435\u0441\u0442\u0430: "'+m(s.name)+'" ',1),a(w,{color:r.testStatus(s.status).color,floating:"",transparent:""},{default:l(()=>[_(m(r.testStatus(s.status).message),1)]),_:2},1032,["color"])]),o("div",{class:"text-caption text-grey",innerHTML:r.testResult(s)},null,8,zt)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),o("div",Jt,[a(y,{class:"q-mt-lg",color:"primary",label:"\u041F\u043E\u0432\u0442\u043E\u0440\u043D\u043E\u0435 \u043F\u0440\u043E\u0445\u043E\u0436\u0434\u0435\u043D\u0438\u0435 \u0430\u0442\u0442\u0435\u0441\u0442\u0430\u0446\u0438\u0438",onClick:e[1]||(e[1]=s=>this.archivateAttestation(this.getUserId))})])]))}var Yt=b(Et,[["render",Ot]]);const Kt={components:{Attestation:wt,AttestationPassed:Yt},methods:{...$("user",["UpdateUserMeta"]),currentAttestationToggle(){let t=this.currentAttestation==="default"?{current_attestation:"reserve"}:{current_attestation:"default"};t.user_id=this.getUser.id,V("api/updateUserMeta",t).then(e=>{this.UpdateUserMeta(JSON.parse(e.data.meta)),this.$router.go()})}},computed:{...A("tests",["getTests","getUserTests","attestationStatus"]),...A("user",["getUser"]),currentAttestation(){return this.getUser.meta.current_attestation==="default"||!this.getUser.meta.current_attestation?"default":"reserve"},testPassedChecker(){var t=!0;return this.getUserTests===null||this.getUserTests.length===0||this.attestationStatus==="ARCHIVE"?(t=!1,t):(this.getTests.forEach(e=>{e.status!=="PASSED"&&t!==!1&&(t=!1)}),t)}},mounted(){console.log(this.currentAttestation)}},jt={class:"home"},Xt={class:"q-pa-md row q-gutter-md"};function Zt(t,e,h,d,i,r){const g=x("Attestation"),s=x("AttestationPassed");return n(),u("div",jt,[o("div",Xt,[r.testPassedChecker?r.testPassedChecker?(n(),c(s,{key:1})):k("",!0):(n(),c(g,{key:0}))])])}var fe=b(Kt,[["render",Zt]]);export{fe as default};
