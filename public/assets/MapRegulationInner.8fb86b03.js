import{_ as f,a9 as h,ab as m,L as s,a3 as l,ad as p,S as r,M as t,Q as a,N as o,T as k,K as n,P as b,R as v,G as C}from"./index.9eb2ac42.js";import{b as y,Q as g,a as D}from"./request-helper.aa1b8491.js";import{Q}from"./axios-vo.cd39899b.js";import{Q as R}from"./QDialog.caae0a66.js";import{C as q}from"./ClosePopup.8674ad88.js";import"./use-dark.04b71f89.js";import"./use-prevent-scroll.91f72607.js";import"./use-timeout.70c9d1fe.js";import"./use-tick.f13b0e4d.js";import"./use-model-toggle.fd8cf537.js";import"./focus-manager.02955f48.js";const L={data(){return{deleteRegulationDialog:!1}},methods:{...h("regulations",["regulationInit","regulationUnset","regulationsList","regulationSetLink"]),refreshLink(e){let i=e.target;i.setAttribute("disabled","disabled");let u=this.current_regulation.full_link;this.regulationSetLink(""),setTimeout(()=>{this.regulationSetLink(u),i.removeAttribute("disabled")},1e3)},disableSelect(e){console.log(e),e.preventDefault()},deleteRegulation(){y(`api/regulations/${this.current_regulation.id}`).then(e=>{(e.status===200||e.status===201)&&this.$router.push("/map/regulations")})}},computed:{...m("regulations",["regulations","current_regulation"]),...m("user",["getToken","isAdmin"])},mounted(){this.regulations==null?this.regulationsList().then(e=>{this.regulationInit(this.$route.params.id)}):this.regulationInit(this.$route.params.id)},unmounted(){this.regulationUnset()}},x={key:0,class:"title-container"},S={class:"title--style-1"},V={class:"q-mt-xl q-mb-md info-section text-secondary"},A={class:"row info-section__content"},$=l("div",{class:"text--style-2"},"\u0415\u0441\u043B\u0438 \u043E\u043A\u043D\u043E \u0441\u043D\u0438\u0437\u0443 \u043F\u0443\u0441\u0442\u043E\u0435 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u043D\u0430 \u043A\u043D\u043E\u043F\u043A\u0443:",-1),I={class:"frame-container shadow-10 q-mt-xl"},N=["src"],w={key:1,class:"q-my-xl"},B=l("div",{class:"text-h6"},"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435",-1);function T(e,i,u,U,d,_){return n(),s(k,null,[e.current_regulation!=null?(n(),s("div",x,[l("h6",S,p(e.current_regulation.name),1)])):r("",!0),l("div",V,[l("div",A,[t(b,{class:"info-section__icon q-mr-md",name:"info"}),$,t(a,{class:"q-ml-md q-mr-md",color:"secondary",label:"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u043E\u043A\u043D\u043E",onClick:_.refreshLink},null,8,["onClick"])])]),l("div",I,[e.current_regulation!=null?(n(),s("iframe",{key:0,class:"docx-frame",src:e.current_regulation.full_link,frameborder:"0"},null,8,N)):r("",!0)]),e.isAdmin?(n(),s("div",w,[t(a,{color:"negative",label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0443\u0441\u0442\u0430\u0432",onClick:i[0]||(i[0]=c=>this.deleteRegulationDialog=!this.deleteRegulationDialog)}),t(R,{modelValue:d.deleteRegulationDialog,"onUpdate:modelValue":i[1]||(i[1]=c=>d.deleteRegulationDialog=c)},{default:o(()=>[t(Q,null,{default:o(()=>[t(g,null,{default:o(()=>[B]),_:1}),t(g,{class:"q-pt-none"},{default:o(()=>[v(" \u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0443\u0441\u0442\u0430\u0432? ")]),_:1}),t(D,{align:"right"},{default:o(()=>[t(a,{flat:"",label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",color:"negative",onClick:this.deleteRegulation},null,8,["onClick"]),C(t(a,{flat:"",label:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",color:"primary"},null,512),[[q]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):r("",!0)],64)}var W=f(L,[["render",T]]);export{W as default};
